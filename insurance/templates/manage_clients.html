<!DOCTYPE html>
<html>

<head>
    <title>Manage Clients</title>
    <style>
        .error {
            color: red;
            font-size: 14px;
        }

        input:invalid {
            border-color: red;
        }

        input:valid {
            border-color: green;
        }
    </style>
</head>

<body>
    <h2>Add Client</h2>
    <form method="POST" id="clientForm">
        {% csrf_token %}
        {% for field in form %}
        <div>
            {{ field.label_tag }}
            {{ field }}
            <div class="error" id="{{ field.name }}_error"></div>
        </div>
        {% endfor %}
        <button type="submit">Submit</button>
    </form>

    <script>
        const form = document.getElementById("clientForm");

        const phoneInput = document.getElementById("id_phone");
        const emailInput = document.getElementById("id_email");
        const aadharInput = document.getElementById("id_aadhar");
        const panInput = document.getElementById("id_pan");

        function validatePhone() {
            const val = phoneInput.value.trim();
            const error = document.getElementById("phone_error");
            if (!/^\d{10}$/.test(val)) {
                error.textContent = "Phone must be exactly 10 digits";
                return false;
            }
            error.textContent = "";
            return true;
        }

        function validateEmail() {
            const val = emailInput.value.trim();
            const error = document.getElementById("email_error");
            if (!/^[^@]+@[^@]+\.(com|in)$/.test(val)) {
                error.textContent = "Enter a valid .com or .in email";
                return false;
            }
            error.textContent = "";
            return true;
        }

        function validateAadhar() {
            const val = aadharInput.value.trim();
            const error = document.getElementById("aadhar_error");
            if (!/^\d{14}$/.test(val)) {
                error.textContent = "Aadhar must be exactly 14 digits";
                return false;
            }
            error.textContent = "";
            return true;
        }

        function validatePAN() {
            const val = panInput.value.trim();
            const error = document.getElementById("pan_error");
            if (!/^\d{14}$/.test(val)) {
                error.textContent = "PAN must be exactly 14 digits";
                return false;
            }
            error.textContent = "";
            return true;
        }

        // Attach input events
        phoneInput.addEventListener("input", validatePhone);
        emailInput.addEventListener("input", validateEmail);
        aadharInput.addEventListener("input", validateAadhar);
        panInput.addEventListener("input", validatePAN);

        // Prevent form submission if any field is invalid
        form.addEventListener("submit", function (e) {
            const isPhoneValid = validatePhone();
            const isEmailValid = validateEmail();
            const isAadharValid = validateAadhar();
            const isPanValid = validatePAN();

            if (!(isPhoneValid && isEmailValid && isAadharValid && isPanValid)) {
                e.preventDefault();
            }
        });
    </script>
</body>

</html>